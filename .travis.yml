language: node_js
node_js:
- node
- lts/*
cache:
  directories:
  - "~/.npm"
  - ".jest"
before_script:
- npm install -g npm@latest
- echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf && sudo sysctl
  -p
script:
- npm ci
- npx jest --ci
jobs:
  include:
  - stage: deploy
    node_js: lts/*
    script:
    - npm ci
    - npx expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
    - npx expo publish --release-channel develop --non-interactive
env:
  global:
  - secure: utTK8sHa10mzL2FnWnrVHtAEMAvzNDdt5QjbuMHYFcmAsZvCsC4ulevuFbBZQDSbmutSyULShYMlay+Xy8uCTSBKj8gBBvbBsl22BWcEObs7FycwkmTUVtrzwyQaOzx39Y+MYJ9E5FYOqz/0qL/qQ5oDhZyJG4d9QR4E8Sv8DU8VbEB276UE407kg8ibJAgMpPHi5s2Syvsl3GE21LucCn6/h9/f8D51thCGvv/JM66DE3B/ardi/bSpBLZPfcfeK1kRxoMLxuMA7roMlAtWf+g657PSpiN3KwcpPzY10hJFEJrpS1t3+TV1KIJnWkS2OBTnCbDFaTt/fYyVbAtialc4G1e435hIJPjXqxZUGp0CCV3trwJwZuFCZLTrF5jsSPQxQQkDAeWDLusAtiZZkv0i7eBLgVVfSaHFI6Kxc12aOmL16FAkbvOnLZyaR9NuyiCbKjX73IvUhNnsfMRfoJBQw4UI4nwNOnKiosCmD4Efgd/imF38MbwJEoYaqVF353xfIsK+Qfc/lcIEe4umnRNjgvAFrNbXgUDfWKK2EjqsmCR9xA3QMmLVrK5MLwXCpUmODALuveHwNpXfkUukeUZCHghCsyqsxt6TriBFg1D2+fvFNLTe92/ZjeIRMlU0YAfRFH1eJXs2YMoCj22d7i1itTGi+Ud1dDEhqCzs05I=
  - secure: cO77k9EARIQkc9Qpu/2MWMhxm3S0YfevsVw47qM1onJ77wdMrRBMlMq7HQWkP+RoX9HQtImNiRha/B7anBokMEPEhcsL+ep7GCqvfLzSL98YrsZS8gtSrDdZ8P7+0ew7qOv+2pxw2Ra5uoqAbAfV/2BXKgrRJ+gaBpNRlySHFOfWRSbGuWneWeHkdwSFLFw6TN88bR4qlL4Os1YP9UljFuLB53rX0kWPMXTeO4s3JIHB4CtPaYdFXmpvkF9rcFQd+b11ydx72g9bRsi5yyQF0jYBUFt2fG/I8THKy4it70wYBk+rkmPw8FVKYwvcoXCHMG7tBVEUZ72mwODJyMKMdVxU7hETPEUvw8WynopRCia/GX3bf9LU0bQu/aerJhUPfdGJzESUvqYIBzjd9nIUR+fTUG25meVqQ5BnoxxNvh80bRXNBf4qot1Q4T5KEZAGx3yOc+Xf7VXjLEejB7ywdpx2teTSWqUnug7ABJZhDcEdTIjQ4dlUccPrYgMPGR5uyD8mBcynuqy00AmSaGEYzUZPsjv28pBK422BMmbv4QgPd9Xcl2QoEkGRswyy9cjmK8wNAJa7N2WjYTJzw6XjEowpbt43jz2wnmUOUaYeZ0taMIY/UqPNnNquxU0KzrLs44DqBOIFtAnxZ9L8hwoSg+l1Q9zNzbH0in1gHtNTRG8=
