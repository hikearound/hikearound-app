language: node_js
node_js:
- node
- lts/*
cache:
  directories:
  - "~/.npm"
  - ".jest"
before_script:
- npm install -g npm@latest
- echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p
script:
- npm ci
- npx jest --ci
jobs:
  include:
  - stage: deploy
    node_js: lts/*
    script:
    - npm ci
    - npx expo login -u $EXPO_USERNAME -p $EXPO_PASSWORD
    - npx expo publish --release-channel develop --non-interactive
env:
  global:
  - secure: v13JPEFh68rBcOUx3k8A0HeWNMj/W4Su3el/Rn+56mfZBwp8UDDpDa0qP0SUifUAJoD3fnoiPmRiU6GaCXk4itjYjyFLgScivL0xGOqCl/VBE2sMmmzeXaO3z9C/GS5ypOkcxmw7WyBA9mZLHNmRfpochKGOvR8U0HfHLsIIDuCva7fLLXgki9QfhbPmM87uhjkxIoMRh9IVhQw6aPa3PissfPkEJh57S1wv/lc6HY2fYucZlFJkj74nRrRShkcs8WSaJK36wCkj9FH4PgB8CNFGzl6GDhI/Lceur+OXVscfJ87oVskFGKvtAQ4Wby985aj4SfYHi4xOHXwdFykTerOu1fuAlNiqBc+BubvoyaaHiRjbJ3zJDQdlfZuHAOATTJ5mOWEzsXxip+SVmKd5ui28OraHwbIJf4sxMvfCWrwUtU1l2CuZL86iB6AkqxUgDfUrHGC2IC6097QkyfGLDjYLAIt3lLFI976eejf/pq//g+9D8t3iPvcN+9Pt3c2h46Z3NvTsM8ONTOcH1+KxcJu4SZC8pKwYnW4tl+N7fjCME8j8/P3NHOcPWwfBsANSTLVLZXFRVyUmAz6m1PxqCjS7B1WhbaLyWeJhbfPQdINHYWJR4I3h35Ztj21LkqzRTI62LSknvUYtRhBL862AKKEaueeNlcWdIq7ITCTafC8=
  - secure: Pj60jpE9halmZEI5RjLbvwUsJQX3RmMiV+i+cs5nyrolIA/GhWjJz6QvsDriIgqkZurqS5NibGWDRhU0me3ZuoCNnhi90m82wW2m1hgQ92vnyVMhULU5l+5KTyJAHZR3QNimhp01v15XJDrYeAbWSWLiKoGVmVnZW4SXKBBFNeHYF3UDHpFzqZVOGEbh/myRoY6bOc0h0KDDG8KpClmoIBT0gEJGTM1NXNNzreKEIiXDCPcAkNoAxiwQVojuTcGJte1UI6lrRTIFWm1OFL1AhCBn+dKQqTkNr+XbG7AwDl7i2BlAREn0lZPW5o9OzHVyEdNgeJ/IiSPksFGhv6JJHDTHzy9HqXN4G8mb1cTcRuLTYqGyULyqnfP7SvpnycQVCnBiyUsKgHEX4fNdYDhYmtSsUsdXTQog4HoCadOU8rnfu/Doq+Cbly/3ReaX+bYHv22YLWHXPRjQb1Gcb6AQau1FH2VP0BwMhTZMbfd3HNH1jAVoW81NlcPaLd8Pc3CIENUDHmpNpmeY8m3bifnbyE++zNPCR5bg3QdOjtTJqM7Mil++lzHnXuUvF5KSm13aNTznyfSqeJTbBaaSaMALGnEhqXLmT2jP39icG1zDkFloSgK15L3oEcNyC3wCj+qnheFAFypn6zVt+sq2pu+kzAbNYlgpg+zOymCaWWuvIkA=
